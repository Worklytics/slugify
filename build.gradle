plugins {
    id 'checkstyle'
    id 'java-library'
    id 'pmd'

    alias(libs.plugins.lombok)
    alias(libs.plugins.reckon)
    alias(libs.plugins.versions)
}

repositories {
    mavenCentral()
}

checkstyle {
    toolVersion = '10.3'
}

compileJava {
    targetCompatibility = JavaVersion.VERSION_11
}

pmd {
    consoleOutput = true
    toolVersion = '6.46.0'
    ruleSetFiles = fileTree('config/pmd').filter { it.file && it.name.endsWith('.xml') }
    ruleSets = []
}

reckon {
    scopeFromProp()
    stageFromProp('rc', 'final')
}

java {
    registerFeature('transliterator') {
        usingSourceSet sourceSets.main
    }
}

tasks.named('dependencyUpdates').configure {
    gradleReleaseChannel = 'current'
    revision = 'release'
}

dependencies {
    transliteratorImplementation libs.icu4j
    testImplementation libs.icu4j
    testImplementation libs.junit
}
